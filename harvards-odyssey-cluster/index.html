<!DOCTYPE html>
<html lang="en">
<head>
  <title>Harvard&#39;s Odyssey Cluster</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="/js/jquery.js"></script>

  
  <link rel="stylesheet" type="text/css" href="/css/raleway.css">
  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/skeleton.css">
  <link rel="stylesheet" type="text/css" href="/css/custom.css">

  
  <link rel="stylesheet" type="text/css" href="/js/pushy/pushy.css">
  <link rel="stylesheet" type="text/css" href="/js/pushy/demo.css">
  <script type="text/javascript" src="/js/pushy/pushy.min.js"></script>

  
  <link rel="stylesheet" type="text/css" href="/js/highlight.js/github.css">
  <script type="text/javascript" src="/js/highlight.js/highlight.pack.js"></script>
  <script type="text/javascript">hljs.initHighlightingOnLoad();</script>

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  
  

</head>

<body>
  <nav class="pushy pushy-left">
    <ul class="pushy">
      <li><a href="/">Home</a></li>
      <li><a href="https://www.linkedin.com/pub/andrew-marder/20/317/369">LinkedIn</a></li>
      <li><a href="https://scholar.google.com/citations?user=yRLx6UoAAAAJ">Publications</a></li>
      <li><a href="https://github.com/amarder">GitHub</a></li>
      <li><a href="http://stackoverflow.com/users/3756632/andrew">Stack Overflow</a></li>
      <li><a href="https://twitter.com/andrewmarder">Twitter</a></li>
    </ul>
  </nav>
  <div class="site-overlay"></div>

  <div class="container" id="container">
    
    <div class="menu-btn" style="float: right;">Andrew Marder &nbsp; &#9776;</div>
    <div style="height: 40px; margin-bottom: 25px;"></div>


<h1>Harvard&#39;s Odyssey Cluster</h1>


<h1 id="useful-references">Useful References</h1>

<ul>
<li><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/">Quickstart guide</a>

<ul>
<li><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/#Use_a_terminal_to_ssh_to_loginrcfasharvardedu">SSH</a></li>
<li><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/#Transfer_any_files_you_may_need">Copying files</a></li>
<li><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/#Determine_what_software_you39d_like_to_load_and_run">Loading research software</a></li>
</ul></li>
<li><a href="https://rc.fas.harvard.edu/resources/access-and-login/#Consider_an_NX_remote_desktop_for_graphical_applications_like_Matlab_and_RStudio">GUI applications</a></li>
<li><a href="https://account.rc.fas.harvard.edu/password_reset/">Password reset tool</a></li>
<li><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/#Setup_OpenAuth_for_two_factor_authentication">Two factor authentication</a></li>

<li><p><a href="https://rc.fas.harvard.edu/resources/odyssey-quickstart-guide/#_or_an_interactive_job">Submitting an interactive job</a></p>

<pre><code>srun -p interact --pty --mem 500 -t 0-6:00 /bin/bash
</code></pre></li>
</ul>

<p>*</p>

<p>sacct &ndash;starttime 2015-12-01 &ndash;format=JobID,JobName,ReqMem,MaxRSS,Elapsed,ExitCode</p>

<h1 id="old-stuff">Old stuff</h1>

<h1 id="running-jobs">Running jobs</h1>

<ol>
<li><a href="https://rc.fas.harvard.edu/kb/high-performance-computing/lsf-submit-an-lsf-job-2/">How to submit a job.</a></li>
<li><a href="https://rc.fas.harvard.edu/kb/high-performance-computing/general-use-odyssey-queues/">Where to submit your job.</a></li>
<li><code>lqueues</code> is a nice command for looking at the queues availabe for
your use and their availability.</li>
<li>Here is a <a href="http://rc.fas.harvard.edu/kb/high-performance-computing/modules-let-you-access-different-software-packages-on-odyssey/">page</a> on finding the right modules. Use
<code>modulesearch</code> to find the module you need.</li>

<li><p>Running compute-intensive jobs on the login node leads to a very
courteous email to make better use of LSF. A quick way to get a
<code>bash</code> prompt on a backend node can be done using the following
<code>bsub</code> command:</p>

<pre><code>bsub -Is -q interact /bin/bash
</code></pre></li>
</ol>

<p>I submitted a job to the <code>short_parallel</code> queue, it took a while for
the job to start up. I still need to learn the art of navigating this
system well. ~15 minutes is actually not too bad for the short
parallel queue.  The run time limit there is 1 hour, and our goal is
to keep pend time shorter than the run time.  The more cores (-n) and
ptile conditions you add, the longer the batch job system will have to
work to find slots to run it. The interactive queue is better for
exploratory work.</p>

<h1 id="version-of-hadoop-installed">Version of Hadoop installed</h1>

<p>The current version of Hadoop installed on Odyssey is 1.0.4, the
current stable version is 1.1.X. I doubt this will be a big issue, but
it&rsquo;s worth keeping in mind.</p>

<h1 id="running-a-hadoop-job">Running a Hadoop job</h1>

<p>Create a bsub input file named bsub.in with the following contents:</p>

<pre><code>#BSUB -q short_parallel
#BSUB -o job.out
#BSUB -e job.err
#BSUB -n 2
#BSUB -R 'span[ptile=1]'

export HADOOP_HOME=/n/sw/hadoop-1.0.4
export JAVA_HOME=/n/sw/jdk1.6.0_30

hpc-hadoop-mapreduce \
  hadoop jar &quot;$HADOOP_HOME&quot;/hadoop-examples-*.jar \
  grep input output 'mapred|queue'
</code></pre>

<p>Run the following commands:</p>

<pre><code>module load hpc/rc
mkdir input
cp /n/sw/hadoop-1.0.4/conf/*.xml input/
bsub &lt; bsub.in
</code></pre>

<p>A fuller explanation of this example can be found <a href="https://github.com/fasrc/hpc-hadoop-mapreduce">here</a>.</p>

<h1 id="running-python-scripts">Running Python scripts</h1>

<p>It looks like using full stack, and easy_install might be the way to
go:</p>

<pre><code>export PYTHONPATH=~/python:$PYTHONPATH
easy_install --install-dir=~/python/ fabric
</code></pre>

<p>Incorporate John&rsquo;s email here.</p>

<h1 id="editing-remote-files">Editing remote files</h1>

<p>I use <code>emacs</code> to edit files. <code>emacs</code> has a great package called
<code>tramp</code> for editing remote files using an <code>ssh</code>
connection. Unfortunately, I had a hard time using <code>tramp</code> with
Odyssey because <code>tramp</code> is unprepared for verification code prompt. As
a workaround I started using <a href="https://help.ubuntu.com/community/SSHFS">SSHFS</a>, which works even better
than <code>tramp</code>. Although <code>magit</code> works <code>SSHFS</code> it seems to be a little
too slow with my current connection, using <code>git</code> at the command line
seems slightly easier.</p>

<h2 id="using-git">Using git</h2>

<p>I couldn&rsquo;t get ssh agent forwarding to work with odyssey. The
instructions I was following are [here][git-forward]. My first
workaround was to copy my local <code>.ssh</code> folder to Odyssey to work with
GitHub. But, after getting <code>SSHFS</code> working with Odyssey, now I just use git that&rsquo;s installed on my local machine. It&rsquo;s a little slow, but it works.</p>

<h1 id="speed-test-of-hadoop">Speed test of Hadoop</h1>

<p>I think it would be informative to run some
<a href="http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/">Hadoop benchmarks</a> on Odyssey.</p>

<div style="height: 50px;"></div>

<div id="disqus_thread"></div>
<script>
var disqus_config = function () {
    this.page.url = '\/harvards-odyssey-cluster\/';
    this.page.identifier = '\/harvards-odyssey-cluster\/';
};

(function() {
    var d = document, s = d.createElement('script');

    s.src = '//amarder-github-pages.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


    </div>

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-68782208-1', 'auto');
ga('send', 'pageview');
</script>

  </body>

  
  <script type="text/javascript">
    $('img').addClass('u-max-full-width')
  </script>
  
</html>

